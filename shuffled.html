<!--
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<!doctype html>
<html>
    <head>

        <script src="bower_components/webcomponentsjs/webcomponents.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

        <link href="bower_components/core-icons/core-icons.html" rel="import">
        <link href="bower_components/core-icon-button/core-icon-button.html" rel="import">
        <link href="bower_components/core-toolbar/core-toolbar.html" rel="import">
        <link href="bower_components/core-animated-pages/core-animated-pages.html" rel="import">
        <link href="bower_components/core-media-query/core-media-query.html" rel="import">
        <link href="bower_components/paper-shadow/paper-shadow.html" rel="import">
        <link href='http://fonts.googleapis.com/css?family=Roboto:400,300,700' rel='stylesheet' type='text/css'>

        <style>
            body {
                font-family: 'Roboto', sans-serif;
                background-color: #eee;
            }

            p {
                margin: 5px 5px 5px 5px;
                font-size: 1em;
                font-weight: 300;
                margin-left: 10%;
                margin-right: 10%;
            }

            h4 {
                margin-top: 1em;
                font-size: 1.5em;
                margin-left: 10%;
                margin-right: 10%;
            }

            .bottomP {
                margin-bottom: 25px;
            }

            .toolbar {
                background-color: #3F51B5;
                color: white;
            }

            #container {
                overflow: auto;
            }

            .textBox {
                border-radius: 3px;
                background-color: white;
                box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.26);
                bottom: 20px;
                position: absolute;
                margin-left: auto;
                margin-right: 20px;
                right: 0;
                min-width: 250px;
            }

            .card {
                position: relative;
                height:250px;
                width: 250px;
                font-size: 50px;
                margin: 10px;
                background-color: tomato;
                border-radius: 4px;
                cursor: default;
                background-position: center;
                background-size: cover !important;
                background-repeat: no-repeat;
            }

            .view {
                background-color: #eee;
                background-position: center;
                background-repeat:no-repeat;
                background-size: auto 100%;

            }

        </style>

    </head>
    <body unresolved fullbleed vertical layout>
        <template is="auto-binding">
            <core-toolbar class="toolbar">
                <core-icon-button icon="{{$.pages.selected != 0 ? 'arrow-back' : 'menu'}}" on-tap="{{back}}"></core-icon-button>
                <div flex>Art in the City</div>
                <core-icon-button icon="more-vert"></core-icon-button>
            </core-toolbar>
            <core-animated-pages id="pages" flex selected="0" on-core-animated-pages-transition-end="{{transitionend}}" transitions="cross-fade-all hero-transition">

                <section vertical layout>

                    <div id="container" flex horizontal wrap around-justified layout hero-p>
                        <template repeat="{{item in items}}">
                            <paper-shadow z=1 class="card" vertical center center-justified layout hero-id="item-{{item}}" style="background-image: url(http://huntercaron.com/artExamStudy/slidesSmall/{{art[item].index}}.jpg); background-size: 100%" hero?="{{$.pages.selected === item + 1 || lastSelected === item + 1}}" on-tap="{{selectView}}"><span cross-fade></span></paper-shadow>
                        </template>
                    </div>
                </section>

                <template repeat="{{item in items}}">
                    <section vertical layout>
                        <div class="view" flex vertical center center-justified layout hero-id="item-{{item}}" style="background-image: url(http://huntercaron.com/artExamStudy/slidesSmall/{{art[item].index}}.jpg);" hero?="{{$.pages.selected === item + 1 || $.pages.selected === 0}}" on-tap="{{back}}"><span cross-fade class="textBox">
                            <h4>{{art[item].name}}</h4>
                            <p>{{art[item].artist}}</p>
                            <p class="bottomP">{{art[item].time}}</p>
                            </span></div>
                    </section>
                </template>

            </core-animated-pages>
        </template>
        <core-media-query id="mediaQuery" query="max-width: 640px"></core-media-query>

        <script>

            document.querySelector('#mediaQuery').addEventListener('core-media-change',
                                                                   function(e) {
                document.body.classList.toggle('core-narrow', e.detail.matches);
            });


            var ordered = [
                {index: 0, name: 'The Houses of Parliament', artist: 'Claude Monet', time: '20th Century Europe'},
                {index: 0, name: 'Gust of Wind at Ejiri in Suruga Province', artist: 'Hokusai', time: '19th Century Japan'},
                {index: 0, name: 'Runners', artist: 'Robert Delaunay', time: '20th Century Europe'},
                {index: 0, name: 'The Death of General Wolfe', artist: 'Benjamin West,', time: '18th Century Europe'},
                {index: 0, name: 'Girl With a Mandolin (Fanny Tellier)', artist: 'Pablo Picasso', time: '20th Century Europe'},
                {index: 0, name: 'Composition VII', artist: 'Wassily Kandinsky', time: '20th Century Europe'},
                {index: 0, name: 'Fountain', artist: 'Marcel Duchamp', time: '20th Century Europe and USA'},
                {index: 0, name: 'Harrier and Jaguar', artist: 'Fiona Banner', time: '21st Century Europe'},
                {index: 0, name: 'A Solitary Temple Amid Clearing Peaks', artist: 'Li Cheng', time: 'Song dynasty China'},
                {index: 0, name: 'Early Spring', artist: 'Guo Xi', time: 'Song dynasty China'},
                {index: 0, name: 'View of Dordrecht with Cattle (The Large Dort)', artist: 'Albert Cuyp', time: '17th Century Europe'},
                {index: 0, name: 'Bentheim Castle', artist: 'Jacob van Ruisdael', time: '17th Century Europe'},
                {index: 0, name: 'Hiker Above the Sea of Mist', artist: 'Caspar David Friedrich', time: '19th Century Europe'},
                {index: 0, name: 'The Vale of Dedham', artist: 'John Constable', time: '19th Century Europe'},
                {index: 0, name: 'York from Gibraltar Point', artist: 'James Gray', time: '19th Century Canada'},
                {index: 0, name: 'Rocky Mountains, Lander\'s Peak', artist: 'Albert Bierstadt', time: '19th Century USA'},
                {index: 0, name: 'The Red Maple', artist: 'A.Y. Jackson', time: '20th Century Canada'},
                {index: 0, name: 'North Shore, Lake Superior', artist: 'Lawren Harris', time: '20th Century Canada'},
                {index: 0, name: 'The Drive', artist: 'Tom Thomson', time: '20th Century Canada'},
                {index: 0, name: 'Pitt Rivers Museum, General View of the Collection', artist: 'Unknown', time: '20th Century'},
                {index: 0, name: 'Toronto Project 1989', artist: 'Tadashi Kawamata', time: '20th Century Canada'},
                {index: 0, name: 'Augustus of Prima Porta', artist: 'Unknown', time: 'Ancient Rome'},
                {index: 0, name: 'Ewer (pitcher) with Wild Man heraldic finial', artist: 'Unknown', time: 'Germany, Late Medieval/Early Modern Period'},
                {index: 0, name: 'woodcut of South American Indians', artist: 'Unknown', time: 'Europe 16th Century'},
                {index: 0, name: 'Robert Andrews and His Wife', artist: 'Thomas Gainsborough,', time: '18th Century Europe'},
                {index: 0, name: 'Henry Darnall III as a Child', artist: 'Justus Engelhardt', time: '18th Century USA'},
                {index: 0, name: 'The Gross Clinic', artist: 'Thomas Eakins', time: '19th Century USA'},
                {index: 0, name: 'The Ironworkersâ€™ Noontime', artist: 'Thomas Anshutz', time: '19th Century USA'},
                {index: 0, name: 'The Grand Odalsique', artist: 'Jean Auguste Dominique Ingres', time: '19th Century Europe'},
                {index: 0, name: 'Twined Bag', artist: 'Unknown Potawatomi', time: '19th Century Great Lakes Region'},
                {index: 0, name: 'Pouch', artist: 'Unknown Odawa (Ottawa)', time: '19th Century Eastern Woodlands Region'},
                {index: 0, name: 'Hiawatha Wampum Wampum', artist: 'Unknown Haudenosaunee', time: 'date disputed, Eastern Woodlands Region'},
                {index: 0, name: 'Parthenon', artist: 'IKTINOS and KALLIKRATES', time: 'Athens, Ancient Greece'},
                {index: 0, name: 'Pantheon', artist: 'Unknown architects', time: 'Ancient Rome'},
                {index: 0, name: 'Colosseum', artist: 'Unknown architects', time: 'Ancient Rome'},
                {index: 0, name: 'Cathedral of Saint-Denis', artist: 'Abbot Suger', time: 'Medieval France'},
                {index: 0, name: 'Toronto Dominion Bank', artist: 'E.J. Lennox', time: '20th Century Canada'},
                {index: 0, name: 'Mining the Museum', artist: 'Fred Wilson', time: '20th Century USA'},
                {index: 0, name: 'Artifact Piece', artist: 'James Luna', time: '20th Century USA'},
                {index: 0, name: 'Cherokee', artist: 'Jimmie Durham', time: '20th Century USA'},
                {index: 0, name: 'A Gathering of People for Any Purpose', artist: 'Rebecca Belmore', time: '20th Century Canada'},
                {index: 0, name: 'Mr. and Mrs. Andrews without their Heads', artist: 'Yinka Shonibare', time: '20th Century Europe'},
                {index: 0, name: 'Nha Trang, Vietnam', artist: 'Andreas Gursky', time: '21th Century Europe'},
                {index: 0, name: 'Group of Sixty-Seven', artist: 'Jin-Me Yoon', time: '20th Century Canada'},
                {index: 0, name: 'Lesbian National Parks & Services', artist: 'Shawna Dempsey and Lorri Milan', time: '20th Century Canada'}
            ];

            function shuffle(array) {
                var currentIndex = array.length, temporaryValue, randomIndex ;

                // While there remain elements to shuffle...
                while (0 !== currentIndex) {

                    // Pick a remaining element...
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex -= 1;

                    // And swap it with the current element.
                    temporaryValue = array[currentIndex];
                    array[currentIndex] = array[randomIndex];
                    array[randomIndex] = temporaryValue;
                }

                return array;
            }


            addEventListener('template-bound', function(e) {
                var scope = e.target;
                var items = [], count=45;
                for (var i=0; i < count; i++) {
                    items.push(i);
                    ordered[i].index = i;
                }


                scope.items = items;



                scope.art = shuffle(ordered);

                scope.selectView = function(e) {
                    var i = e.target.templateInstance.model.item;
                    this.$.pages.selected = i+1;
                }

                scope.back = function() {
                    this.lastSelected = this.$.pages.selected;
                    console.log(this.lastSelected);
                    this.$.pages.selected = 0;
                }

                scope.transitionend = function() {
                    if (this.lastSelected) {
                        this.lastSelected = null;
                    }
                }
            })

        </script>

    </body>
</html>
